<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TV应用合集</title>
    <style>
        /* 重置样式 + 16:9基础设置 */
        * { margin: 0; padding: 0; box-sizing: border-box; outline: none; }
        body { 
            background: #1a1a1a; 
            margin: 0; 
            padding: 20px 15px; 
            font-family: "Microsoft Yahei", Arial, sans-serif; 
            color: #fff;
            overflow-x: hidden;
            font-size: 12px;
            line-height: 1.5;
        }
        
        /* 头部样式 */
        header { 
            text-align: center; 
            margin-bottom: 25px; 
            padding: 10px 0;
            border-bottom: 1px solid #333;
        }
        h1 { 
            color: #409eff; 
            font-size: 28px; 
            margin: 0 0 10px 0;
            text-shadow: 0 0 6px rgba(64, 158, 255, 0.5);
        }
        .tips { 
            color: #999; 
            font-size: 14px; 
            margin-top: 5px;
        }
        
        /* 分类导航 */
        .category-nav {
            display: flex;
            overflow-x: auto;
            gap: 12px;
            padding: 12px 0;
            margin-bottom: 25px;
            border-bottom: 1px solid #333;
            scrollbar-width: thin;
            scrollbar-color: #409eff #222;
        }
        .category-nav::-webkit-scrollbar {
            height: 6px;
        }
        .category-nav::-webkit-scrollbar-track {
            background: #222;
            border-radius: 3px;
        }
        .category-nav::-webkit-scrollbar-thumb {
            background: #409eff;
            border-radius: 3px;
        }
        .nav-item {
            background: #2d2d2d;
            padding: 10px 20px;
            border-radius: 25px;
            white-space: nowrap;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 14px;
            flex-shrink: 0;
            border: 1px solid transparent;
        }
        .nav-item:hover, .nav-item:focus {
            background: #409eff;
            color: white;
            transform: scale(1.05);
            border-color: #66b1ff;
            outline: none;
        }
        
        /* 分类内容 */
        .category-content {
            display: none;
            margin-bottom: 30px;
            padding: 10px;
        }
        .category-content h2 {
            color: #409eff;
            margin-bottom: 20px;
            font-size: 20px;
            padding-left: 10px;
            border-left: 4px solid #409eff;
        }
        
        /* 应用网格布局 - 增大间距避免重叠 */
        .app-grid { 
            display: flex;
            flex-wrap: wrap;
            gap: 20px; /* 增大间距 */
            justify-content: flex-start;
            width: 100%;
            max-width: 1920px;
            margin: 0 auto;
            padding: 10px 0 20px 0;
        }
        
        /* 应用卡片样式 - 优化布局，解决文字遮挡问题 */
        .app-card { 
            width: 130px; /* 稍微增大宽度 */
            background: #2d2d2d; 
            border-radius: 10px; 
            padding: 15px 10px; 
            text-align: center; 
            cursor: pointer; 
            transition: all 0.2s ease;
            border: 2px solid transparent;
            height: 170px; /* 增加高度，解决文字遮挡 */
            display: flex;
            flex-direction: column;
            justify-content: space-between; /* 均匀分布内容 */
            flex-shrink: 0;
            margin: 5px; /* 额外的外边距 */
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }
        
        .app-card:focus { 
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(64, 158, 255, 0.8);
            border-color: #409eff;
            background: #333;
            z-index: 10;
            outline: none;
        }
        
        .app-card:hover {
            transform: scale(1.03);
            box-shadow: 0 0 12px rgba(64, 158, 255, 0.5);
            border-color: #66b1ff;
        }
        
        /* 图标容器 */
        .icon-container {
            width: 70px;
            height: 70px;
            margin: 0 auto;
            background: #fff;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
            padding: 2px;
            flex-shrink: 0;
        }
        
        .app-icon { 
            width: 60px; 
            height: 60px;
            object-fit: contain;
        }
        
        .app-name { 
            font-size: 13px; 
            color: #eee; 
            margin: 10px 0; 
            white-space: nowrap; 
            overflow: hidden; 
            text-overflow: ellipsis;
            padding: 0 5px;
            height: 20px;
            flex-shrink: 0;
        }
        
        .download-btn { 
            background: #409eff; 
            color: white; 
            border: none; 
            padding: 6px 0; 
            border-radius: 6px; 
            font-size: 12px; 
            width: 90%; 
            cursor: pointer;
            transition: background 0.2s;
            margin: 0 auto;
            flex-shrink: 0;
        }
        .app-card:focus .download-btn {
            background: #2585e6;
            transform: scale(1.05);
        }
        
        /* 响应式适配 - 不同屏幕尺寸的优化 */
        @media (min-width: 1920px) {
            .app-grid {
                gap: 25px;
            }
            .app-card {
                width: 140px;
                height: 180px;
            }
        }
        
        @media (min-width: 1600px) and (max-width: 1919px) {
            .app-grid {
                gap: 22px;
            }
            .app-card {
                width: 135px;
                height: 175px;
            }
        }
        
        @media (min-width: 1280px) and (max-width: 1599px) {
            .app-grid {
                gap: 20px;
            }
            .app-card {
                width: 130px;
                height: 170px;
            }
        }
        
        @media (min-width: 960px) and (max-width: 1279px) {
            .app-grid {
                gap: 18px;
            }
            .app-card {
                width: 125px;
                height: 165px;
            }
        }
        
        @media (max-width: 959px) {
            .app-grid {
                gap: 15px;
                justify-content: center;
            }
            .app-card {
                width: 120px;
                height: 160px;
                margin: 8px;
            }
            .icon-container {
                width: 65px;
                height: 65px;
            }
            .app-icon {
                width: 55px;
                height: 55px;
            }
        }
        
        @media (max-width: 480px) {
            .app-grid {
                gap: 12px;
            }
            .app-card {
                width: 110px;
                height: 150px;
            }
        }
    </style>
</head>
<body>
    <header tabindex="0">
        <h1>TV应用合集</h1>
        <p class="tips">遥控器上下左右一键切换，回车下载 | 共 14 个应用</p>
    </header>

    <div class="category-nav">
        <div class="nav-item" id="nav-1" onclick="showCategory('category-1')" tabindex="1">
                    全部应用 (14)
                </div><div class="nav-item" id="nav-2" onclick="showCategory('category-2')" tabindex="2">
                    海外 (3)
                </div><div class="nav-item" id="nav-3" onclick="showCategory('category-3')" tabindex="3">
                    影视 (3)
                </div><div class="nav-item" id="nav-4" onclick="showCategory('category-4')" tabindex="4">
                    直播 (6)
                </div><div class="nav-item" id="nav-5" onclick="showCategory('category-5')" tabindex="5">
                    工具 (2)
                </div>
    </div>

    <div class="categories-container">
        <div class="category-content" id="category-1" style="display:block">
                    <h2>全部应用</h2>
                    <div class="app-grid">
                        <div class="app-card" id="category-1-card-1" tabindex="101" onclick="window.open('http://abc.apei583.top:5244/d/APP/tvapp/海外/QuickFox_1.2.6.apk')">
                        <div class="icon-container">
                            <img src="http://abc.apei583.top:5244/d/APP/icon/default.png" class="app-icon" alt="QuickFox_1.2.6">
                        </div>
                        <div class="app-name">QuickFox_1.2.6</div>
                        <button class="download-btn">下载</button>
                    </div><div class="app-card" id="category-1-card-2" tabindex="102" onclick="window.open('http://abc.apei583.top:5244/d/APP/tvapp/海外/爱壹帆_2.3.4.apk')">
                        <div class="icon-container">
                            <img src="http://abc.apei583.top:5244/d/APP/icon/爱壹帆_2.3.4.png" class="app-icon" alt="爱壹帆_2.3.4">
                        </div>
                        <div class="app-name">爱壹帆_2.3.4</div>
                        <button class="download-btn">下载</button>
                    </div><div class="app-card" id="category-1-card-3" tabindex="103" onclick="window.open('http://abc.apei583.top:5244/d/APP/tvapp/海外/SmartTube_30.48.apk')">
                        <div class="icon-container">
                            <img src="http://abc.apei583.top:5244/d/APP/icon/SmartTube_30.48.png" class="app-icon" alt="SmartTube_30.48">
                        </div>
                        <div class="app-name">SmartTube_30.48</div>
                        <button class="download-btn">下载</button>
                    </div><div class="app-card" id="category-1-card-4" tabindex="104" onclick="window.open('http://abc.apei583.top:5244/d/APP/tvapp/影视/新喵影视_1.1.3.apk')">
                        <div class="icon-container">
                            <img src="http://abc.apei583.top:5244/d/APP/icon/新喵影视_1.1.3.png" class="app-icon" alt="新喵影视_1.1.3">
                        </div>
                        <div class="app-name">新喵影视_1.1.3</div>
                        <button class="download-btn">下载</button>
                    </div><div class="app-card" id="category-1-card-5" tabindex="105" onclick="window.open('http://abc.apei583.top:5244/d/APP/tvapp/影视/独播库TV_6.2.apk')">
                        <div class="icon-container">
                            <img src="http://abc.apei583.top:5244/d/APP/icon/独播库TV_6.2.png" class="app-icon" alt="独播库TV_6.2">
                        </div>
                        <div class="app-name">独播库TV_6.2</div>
                        <button class="download-btn">下载</button>
                    </div><div class="app-card" id="category-1-card-6" tabindex="106" onclick="window.open('http://abc.apei583.top:5244/d/APP/tvapp/影视/小苹果影视盒子_1.6.1.apk')">
                        <div class="icon-container">
                            <img src="http://abc.apei583.top:5244/d/APP/icon/小苹果影视盒子_1.6.1.png" class="app-icon" alt="小苹果影视盒子_1.6.1">
                        </div>
                        <div class="app-name">小苹果影视盒子_1.6.1</div>
                        <button class="download-btn">下载</button>
                    </div><div class="app-card" id="category-1-card-7" tabindex="107" onclick="window.open('http://abc.apei583.top:5244/d/APP/tvapp/直播/高清电视_2.96.apk')">
                        <div class="icon-container">
                            <img src="http://abc.apei583.top:5244/d/APP/icon/高清电视_2.96.png" class="app-icon" alt="高清电视_2.96">
                        </div>
                        <div class="app-name">高清电视_2.96</div>
                        <button class="download-btn">下载</button>
                    </div><div class="app-card" id="category-1-card-8" tabindex="108" onclick="window.open('http://abc.apei583.top:5244/d/APP/tvapp/直播/千寻_1.1.2.apk')">
                        <div class="icon-container">
                            <img src="http://abc.apei583.top:5244/d/APP/icon/千寻_1.1.2.png" class="app-icon" alt="千寻_1.1.2">
                        </div>
                        <div class="app-name">千寻_1.1.2</div>
                        <button class="download-btn">下载</button>
                    </div><div class="app-card" id="category-1-card-9" tabindex="109" onclick="window.open('http://abc.apei583.top:5244/d/APP/tvapp/直播/老李米古TV [3.5.2].apk')">
                        <div class="icon-container">
                            <img src="http://abc.apei583.top:5244/d/APP/icon/default.png" class="app-icon" alt="老李米古TV [3.5.2]">
                        </div>
                        <div class="app-name">老李米古TV [3.5.2]</div>
                        <button class="download-btn">下载</button>
                    </div><div class="app-card" id="category-1-card-10" tabindex="110" onclick="window.open('http://abc.apei583.top:5244/d/APP/tvapp/直播/丰彩TV_1.0.2.apk')">
                        <div class="icon-container">
                            <img src="http://abc.apei583.top:5244/d/APP/icon/丰彩TV_1.0.2.png" class="app-icon" alt="丰彩TV_1.0.2">
                        </div>
                        <div class="app-name">丰彩TV_1.0.2</div>
                        <button class="download-btn">下载</button>
                    </div><div class="app-card" id="category-1-card-11" tabindex="111" onclick="window.open('http://abc.apei583.top:5244/d/APP/tvapp/直播/星火电视 [1.0.50].apk')">
                        <div class="icon-container">
                            <img src="http://abc.apei583.top:5244/d/APP/icon/default.png" class="app-icon" alt="星火电视 [1.0.50]">
                        </div>
                        <div class="app-name">星火电视 [1.0.50]</div>
                        <button class="download-btn">下载</button>
                    </div><div class="app-card" id="category-1-card-12" tabindex="112" onclick="window.open('http://abc.apei583.top:5244/d/APP/tvapp/直播/昭昭TV_1.0.3.apk')">
                        <div class="icon-container">
                            <img src="http://abc.apei583.top:5244/d/APP/icon/昭昭TV_1.0.3.png" class="app-icon" alt="昭昭TV_1.0.3">
                        </div>
                        <div class="app-name">昭昭TV_1.0.3</div>
                        <button class="download-btn">下载</button>
                    </div><div class="app-card" id="category-1-card-13" tabindex="113" onclick="window.open('http://abc.apei583.top:5244/d/APP/tvapp/工具/野草助手小米海信版_2.0.8.apk')">
                        <div class="icon-container">
                            <img src="http://abc.apei583.top:5244/d/APP/icon/野草助手小米海信版_2.0.8.png" class="app-icon" alt="野草助手小米海信版_2.0.8">
                        </div>
                        <div class="app-name">野草助手小米海信版_2.0.8</div>
                        <button class="download-btn">下载</button>
                    </div><div class="app-card" id="category-1-card-14" tabindex="114" onclick="window.open('http://abc.apei583.top:5244/d/APP/tvapp/工具/BrowseHere浏览器_8.02.085_eb15043_251031_gp.apk')">
                        <div class="icon-container">
                            <img src="http://abc.apei583.top:5244/d/APP/icon/BrowseHere浏览器_8.02.085_eb15043_251031_gp.png" class="app-icon" alt="BrowseHere浏览器_8.02.085_eb15043_251031_gp">
                        </div>
                        <div class="app-name">BrowseHere浏览器_8.02.085_eb15043_251031_gp</div>
                        <button class="download-btn">下载</button>
                    </div>
                    </div>
                </div><div class="category-content" id="category-2" style="display:none">
                    <h2>海外</h2>
                    <div class="app-grid">
                        <div class="app-card" id="category-2-card-1" tabindex="201" onclick="window.open('http://abc.apei583.top:5244/d/APP/tvapp/海外/QuickFox_1.2.6.apk')">
                        <div class="icon-container">
                            <img src="http://abc.apei583.top:5244/d/APP/icon/default.png" class="app-icon" alt="QuickFox_1.2.6">
                        </div>
                        <div class="app-name">QuickFox_1.2.6</div>
                        <button class="download-btn">下载</button>
                    </div><div class="app-card" id="category-2-card-2" tabindex="202" onclick="window.open('http://abc.apei583.top:5244/d/APP/tvapp/海外/爱壹帆_2.3.4.apk')">
                        <div class="icon-container">
                            <img src="http://abc.apei583.top:5244/d/APP/icon/爱壹帆_2.3.4.png" class="app-icon" alt="爱壹帆_2.3.4">
                        </div>
                        <div class="app-name">爱壹帆_2.3.4</div>
                        <button class="download-btn">下载</button>
                    </div><div class="app-card" id="category-2-card-3" tabindex="203" onclick="window.open('http://abc.apei583.top:5244/d/APP/tvapp/海外/SmartTube_30.48.apk')">
                        <div class="icon-container">
                            <img src="http://abc.apei583.top:5244/d/APP/icon/SmartTube_30.48.png" class="app-icon" alt="SmartTube_30.48">
                        </div>
                        <div class="app-name">SmartTube_30.48</div>
                        <button class="download-btn">下载</button>
                    </div>
                    </div>
                </div><div class="category-content" id="category-3" style="display:none">
                    <h2>影视</h2>
                    <div class="app-grid">
                        <div class="app-card" id="category-3-card-1" tabindex="301" onclick="window.open('http://abc.apei583.top:5244/d/APP/tvapp/影视/新喵影视_1.1.3.apk')">
                        <div class="icon-container">
                            <img src="http://abc.apei583.top:5244/d/APP/icon/新喵影视_1.1.3.png" class="app-icon" alt="新喵影视_1.1.3">
                        </div>
                        <div class="app-name">新喵影视_1.1.3</div>
                        <button class="download-btn">下载</button>
                    </div><div class="app-card" id="category-3-card-2" tabindex="302" onclick="window.open('http://abc.apei583.top:5244/d/APP/tvapp/影视/独播库TV_6.2.apk')">
                        <div class="icon-container">
                            <img src="http://abc.apei583.top:5244/d/APP/icon/独播库TV_6.2.png" class="app-icon" alt="独播库TV_6.2">
                        </div>
                        <div class="app-name">独播库TV_6.2</div>
                        <button class="download-btn">下载</button>
                    </div><div class="app-card" id="category-3-card-3" tabindex="303" onclick="window.open('http://abc.apei583.top:5244/d/APP/tvapp/影视/小苹果影视盒子_1.6.1.apk')">
                        <div class="icon-container">
                            <img src="http://abc.apei583.top:5244/d/APP/icon/小苹果影视盒子_1.6.1.png" class="app-icon" alt="小苹果影视盒子_1.6.1">
                        </div>
                        <div class="app-name">小苹果影视盒子_1.6.1</div>
                        <button class="download-btn">下载</button>
                    </div>
                    </div>
                </div><div class="category-content" id="category-4" style="display:none">
                    <h2>直播</h2>
                    <div class="app-grid">
                        <div class="app-card" id="category-4-card-1" tabindex="401" onclick="window.open('http://abc.apei583.top:5244/d/APP/tvapp/直播/高清电视_2.96.apk')">
                        <div class="icon-container">
                            <img src="http://abc.apei583.top:5244/d/APP/icon/高清电视_2.96.png" class="app-icon" alt="高清电视_2.96">
                        </div>
                        <div class="app-name">高清电视_2.96</div>
                        <button class="download-btn">下载</button>
                    </div><div class="app-card" id="category-4-card-2" tabindex="402" onclick="window.open('http://abc.apei583.top:5244/d/APP/tvapp/直播/千寻_1.1.2.apk')">
                        <div class="icon-container">
                            <img src="http://abc.apei583.top:5244/d/APP/icon/千寻_1.1.2.png" class="app-icon" alt="千寻_1.1.2">
                        </div>
                        <div class="app-name">千寻_1.1.2</div>
                        <button class="download-btn">下载</button>
                    </div><div class="app-card" id="category-4-card-3" tabindex="403" onclick="window.open('http://abc.apei583.top:5244/d/APP/tvapp/直播/老李米古TV [3.5.2].apk')">
                        <div class="icon-container">
                            <img src="http://abc.apei583.top:5244/d/APP/icon/default.png" class="app-icon" alt="老李米古TV [3.5.2]">
                        </div>
                        <div class="app-name">老李米古TV [3.5.2]</div>
                        <button class="download-btn">下载</button>
                    </div><div class="app-card" id="category-4-card-4" tabindex="404" onclick="window.open('http://abc.apei583.top:5244/d/APP/tvapp/直播/丰彩TV_1.0.2.apk')">
                        <div class="icon-container">
                            <img src="http://abc.apei583.top:5244/d/APP/icon/丰彩TV_1.0.2.png" class="app-icon" alt="丰彩TV_1.0.2">
                        </div>
                        <div class="app-name">丰彩TV_1.0.2</div>
                        <button class="download-btn">下载</button>
                    </div><div class="app-card" id="category-4-card-5" tabindex="405" onclick="window.open('http://abc.apei583.top:5244/d/APP/tvapp/直播/星火电视 [1.0.50].apk')">
                        <div class="icon-container">
                            <img src="http://abc.apei583.top:5244/d/APP/icon/default.png" class="app-icon" alt="星火电视 [1.0.50]">
                        </div>
                        <div class="app-name">星火电视 [1.0.50]</div>
                        <button class="download-btn">下载</button>
                    </div><div class="app-card" id="category-4-card-6" tabindex="406" onclick="window.open('http://abc.apei583.top:5244/d/APP/tvapp/直播/昭昭TV_1.0.3.apk')">
                        <div class="icon-container">
                            <img src="http://abc.apei583.top:5244/d/APP/icon/昭昭TV_1.0.3.png" class="app-icon" alt="昭昭TV_1.0.3">
                        </div>
                        <div class="app-name">昭昭TV_1.0.3</div>
                        <button class="download-btn">下载</button>
                    </div>
                    </div>
                </div><div class="category-content" id="category-5" style="display:none">
                    <h2>工具</h2>
                    <div class="app-grid">
                        <div class="app-card" id="category-5-card-1" tabindex="501" onclick="window.open('http://abc.apei583.top:5244/d/APP/tvapp/工具/野草助手小米海信版_2.0.8.apk')">
                        <div class="icon-container">
                            <img src="http://abc.apei583.top:5244/d/APP/icon/野草助手小米海信版_2.0.8.png" class="app-icon" alt="野草助手小米海信版_2.0.8">
                        </div>
                        <div class="app-name">野草助手小米海信版_2.0.8</div>
                        <button class="download-btn">下载</button>
                    </div><div class="app-card" id="category-5-card-2" tabindex="502" onclick="window.open('http://abc.apei583.top:5244/d/APP/tvapp/工具/BrowseHere浏览器_8.02.085_eb15043_251031_gp.apk')">
                        <div class="icon-container">
                            <img src="http://abc.apei583.top:5244/d/APP/icon/BrowseHere浏览器_8.02.085_eb15043_251031_gp.png" class="app-icon" alt="BrowseHere浏览器_8.02.085_eb15043_251031_gp">
                        </div>
                        <div class="app-name">BrowseHere浏览器_8.02.085_eb15043_251031_gp</div>
                        <button class="download-btn">下载</button>
                    </div>
                    </div>
                </div>
    </div>

    <script>
        // 当前激活的分类
        let currentCategory = document.querySelector('.category-content[style*="display:block"]');
        let currentNavItem = document.querySelector('.nav-item');
        
        // 显示指定分类
        function showCategory(categoryId) {
            // 隐藏所有分类
            document.querySelectorAll('.category-content').forEach(el => {
                el.style.display = 'none';
            });
            
            // 显示选中分类
            const targetCategory = document.getElementById(categoryId);
            if (targetCategory) {
                targetCategory.style.display = 'block';
                currentCategory = targetCategory;
                
                // 更新导航选中状态
                document.querySelectorAll('.nav-item').forEach(el => {
                    el.style.background = '';
                    el.style.color = '';
                    el.style.borderColor = 'transparent';
                });
                
                const navId = categoryId.replace('category-', 'nav-');
                const targetNav = document.getElementById(navId);
                if (targetNav) {
                    targetNav.style.background = '#409eff';
                    targetNav.style.color = 'white';
                    targetNav.style.borderColor = '#66b1ff';
                    currentNavItem = targetNav;
                }
                
                // 聚焦到第一个应用卡片
                const firstCard = targetCategory.querySelector('.app-card');
                if (firstCard) {
                    // firstCard.focus(); // 可选：自动聚焦第一个卡片
                }
            }
        }
        
        // 初始化第一个分类
        document.querySelectorAll('.nav-item')[0].style.background = '#409eff';
        document.querySelectorAll('.nav-item')[0].style.color = 'white';
        document.querySelectorAll('.nav-item')[0].style.borderColor = '#66b1ff';
        
        // 遥控器导航控制
        const navItems = Array.from(document.querySelectorAll('.nav-item'));
        
        // 获取所有可聚焦元素
        function getAllFocusable() {
            const focusable = [];
            focusable.push(document.querySelector('header'));
            navItems.forEach(item => focusable.push(item));
            
            // 添加当前分类的应用卡片
            if (currentCategory) {
                const cards = currentCategory.querySelectorAll('.app-card');
                cards.forEach(card => focusable.push(card));
            }
            
            return focusable;
        }
        
        // 导航控制
        document.onkeydown = function(e) {
            e = e || window.event;
            const key = e.key || e.keyCode;
            
            const focusable = getAllFocusable();
            const columnCount = calculateColumnCount();
            
            // 取消按键重复触发延迟
            e.repeat = false;
            
            // 查找当前焦点位置
            let currentIndex = focusable.findIndex(el => el === document.activeElement);
            if (currentIndex === -1) currentIndex = 0;
            
            let newIndex = currentIndex;
            
            switch(key) {
                case 'ArrowRight': case 39:
                    newIndex = Math.min(currentIndex + 1, focusable.length - 1);
                    break;
                    
                case 'ArrowLeft': case 37:
                    newIndex = Math.max(currentIndex - 1, 0);
                    break;
                    
                case 'ArrowDown': case 40:
                    if (currentIndex === 0) { // header
                        newIndex = 1; // 第一个导航项
                    } else if (currentIndex <= navItems.length) { // 导航项
                        // 切换到当前分类的第一个应用
                        const firstCardIndex = navItems.length + 1;
                        if (firstCardIndex < focusable.length) {
                            newIndex = firstCardIndex;
                        }
                    } else { // 应用卡片
                        const cardIndex = currentIndex - (navItems.length + 1);
                        const nextCardIndex = cardIndex + columnCount;
                        const totalCards = focusable.length - (navItems.length + 1);
                        
                        if (nextCardIndex < totalCards) {
                            newIndex = currentIndex + columnCount;
                        }
                    }
                    break;
                    
                case 'ArrowUp': case 38:
                    if (currentIndex <= navItems.length) { // 导航项或header
                        newIndex = Math.max(currentIndex - 1, 0);
                    } else { // 应用卡片
                        const cardIndex = currentIndex - (navItems.length + 1);
                        const prevCardIndex = cardIndex - columnCount;
                        
                        if (prevCardIndex >= 0) {
                            newIndex = currentIndex - columnCount;
                        } else {
                            // 回到最后一个导航项
                            newIndex = navItems.length;
                        }
                    }
                    break;
                    
                case 'Enter': case 13:
                    if (currentIndex === 0) { // header
                        // 无操作
                    } else if (currentIndex <= navItems.length) { // 导航项
                        const navItem = focusable[currentIndex];
                        const categoryId = navItem.id.replace('nav-', 'category-');
                        showCategory(categoryId);
                    } else { // 应用卡片
                        focusable[currentIndex].click();
                        const appName = focusable[currentIndex].querySelector('.app-name').textContent;
                        console.log(`正在下载：${appName}`);
                    }
                    break;
                    
                case 'Escape': case 27:
                    return;
                default:
                    return;
            }
            
            if (newIndex !== currentIndex && newIndex < focusable.length) {
                focusable[newIndex].focus();
                
                focusable[newIndex].scrollIntoView({
                    behavior: 'instant',
                    block: 'nearest',
                    inline: 'nearest'
                });
            }
            
            e.preventDefault();
            e.stopPropagation();
            return false;
        };
        
        // 计算列数
        function calculateColumnCount() {
            const grid = document.querySelector('.app-grid');
            if (!grid) return 6;
            
            // 根据屏幕宽度计算列数
            const screenWidth = window.innerWidth;
            if (screenWidth >= 1920) return Math.floor(screenWidth / 150);
            if (screenWidth >= 1600) return Math.floor(screenWidth / 145);
            if (screenWidth >= 1280) return Math.floor(screenWidth / 140);
            if (screenWidth >= 960) return Math.floor(screenWidth / 135);
            if (screenWidth >= 768) return Math.floor(screenWidth / 130);
            return Math.floor(screenWidth / 120) || 3;
        }
        
        // 初始聚焦
        document.querySelector('header').focus();
        
        // 窗口大小变化时重新计算布局
        window.addEventListener('resize', function() {
            // 重新计算列数以适应新的窗口大小
            calculateColumnCount();
        });
    </script>
</body>
</html>