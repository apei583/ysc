<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TV应用合集</title>
    <style>
        /* 重置样式 + 720P基础设置 */
        * { margin: 0; padding: 0; box-sizing: border-box; outline: none; }
        body { 
            background: #1a1a1a; 
            margin: 0; 
            padding: 20px 15px; /* 缩小边距，适配720P */
            font-family: "Microsoft Yahei", Arial, sans-serif; 
            color: #fff;
            overflow-x: hidden;
            font-size: 14px; /* 基础字体缩小 */
        }
        
        /* 头部样式（适配720P） */
        header { 
            text-align: center; 
            margin-bottom: 25px; 
            padding: 10px 0;
            border-bottom: 1px solid #333;
        }
        h1 { 
            color: #409eff; 
            font-size: 28px; /* 标题缩小 */
            margin: 0;
            text-shadow: 0 0 6px rgba(64, 158, 255, 0.5);
        }
        .tips { 
            color: #999; 
            font-size: 16px; 
            margin-top: 8px;
        }
        
        /* 应用网格布局（720P优先显示4列） */
        .app-grid { 
            display: flex;
            flex-wrap: wrap;
            gap: 15px; /* 缩小间距，增加列数 */
            justify-content: center; /* 居中排列，更美观 */
            max-width: 1280px; /* 720P屏幕最大宽度 */
            margin: 0 auto;
            padding-bottom: 30px;
        }
        
        /* 卡片缩小（适配720P，确保4列显示） */
        .app-card { 
            width: 280px; /* 缩小卡片宽度（原180px→140px，720P下4列=140*4 + 15*3=605px < 720P宽度） */
            background: #2d2d2d; 
            border-radius: 10px; 
            padding: 15px 10px; 
            text-align: center; 
            cursor: pointer; 
            transition: all 0.2s ease; /* 加快过渡速度 */
            border: 2px solid transparent;
            height: 180px; /* 缩小卡片高度（原240px→180px） */
            display: flex;
            flex-direction: column;
            justify-content: center;
            flex-shrink: 0;
        }
        
        /* 焦点样式（保持明显，适配小卡片） */
        .app-card:focus { 
            transform: scale(1.05); /* 缩小放大比例，避免超出屏幕 */
            box-shadow: 0 0 15px rgba(64, 158, 255, 0.8);
            border-color: #409eff;
            background: #333;
            z-index: 10;
        }
        
        /* 图标容器缩小（适配720P） */
        .icon-container {
            width: 90px; /* 原120px→90px */
            height: 90px;
            margin: 0 auto 10px;
            background: #fff;
            border-radius: 15px; /* 缩小圆角 */
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 3px 6px rgba(0,0,0,0.3);
        }
        
        /* 图标大小匹配容器 */
        .app-icon { 
            width: 75px; /* 原100px→75px */
            height: 75px;
            object-fit: contain;
        }
        
        /* 应用名称缩小字体 */
        .app-name { 
            font-size: 16px; /* 原18px→16px */
            color: #eee; 
            margin: 0 0 8px 0; 
            white-space: nowrap; 
            overflow: hidden; 
            text-overflow: ellipsis;
            padding: 0 5px;
        }
        
        /* 下载按钮缩小 */
        .download-btn { 
            background: #409eff; 
            color: white; 
            border: none; 
            padding: 6px 0; /* 缩小内边距 */
            border-radius: 6px; 
            font-size: 14px; /* 原16px→14px */
            width: 100%; 
            cursor: pointer;
            transition: background 0.2s;
        }
        .app-card:focus .download-btn {
            background: #2585e6;
        }
        
        /* 响应式适配（覆盖不同分辨率，优先保证720P体验） */
        /* 720P及以上（≥1280px）：4列 */
        @media (min-width: 1280px) {
            .app-card { width: 280px; } /* 720P下4列刚好适配 */
        }
        /* 1080P屏幕（可选，自动扩展列数） */
        @media (min-width: 1920px) {
            .app-card { width: 280px; } /* 1080P下可显示6列 */
            .app-grid { gap: 20px; }
        }
        /* 小屏电视（<900px）：3列 */
        @media (max-width: 900px) {
            .app-card { width: 220px; }
        }
        /* 迷你屏（<600px）：2列 */
        @media (max-width: 600px) {
            .app-card { width: 180px; height: 160px; }
            .icon-container { width: 80px; height: 80px; }
            .app-icon { width: 65px; height: 65px; }
            .app-name { font-size: 14px; }
        }
    </style>
</head>
<body>
    <header tabindex="0">
        <h1>TV应用合集</h1>
        <p class="tips">遥控器上下左右选择，回车下载 | 共 12 个应用</p>
    </header>

    <div class="app-grid">
        <div class="app-card" tabindex="1" onclick="window.open('http://abc.apei583.top:5244/d/APP/tvapp/BrowseHere浏览器_8.02.085_eb15043_251031_gp.apk')">
            <div class="icon-container">
                <img src="http://abc.apei583.top:5244/d/APP/tvapp/icon/BrowseHere浏览器_8.02.085_eb15043_251031_gp.png" class="app-icon" alt="BrowseHere浏览器_8.02.085_eb15043_251031_gp">
            </div>
            <div class="app-name">BrowseHere浏览器_8.02.085_eb15043_251031_gp</div>
            <button class="download-btn">立即下载</button>
        </div>
        <div class="app-card" tabindex="2" onclick="window.open('http://abc.apei583.top:5244/d/APP/tvapp/高清电视_2.96.apk')">
            <div class="icon-container">
                <img src="http://abc.apei583.top:5244/d/APP/tvapp/icon/高清电视_2.96.png" class="app-icon" alt="高清电视_2.96">
            </div>
            <div class="app-name">高清电视_2.96</div>
            <button class="download-btn">立即下载</button>
        </div>
        <div class="app-card" tabindex="3" onclick="window.open('http://abc.apei583.top:5244/d/APP/tvapp/千寻_1.1.2.apk')">
            <div class="icon-container">
                <img src="http://abc.apei583.top:5244/d/APP/tvapp/icon/千寻_1.1.2.png" class="app-icon" alt="千寻_1.1.2">
            </div>
            <div class="app-name">千寻_1.1.2</div>
            <button class="download-btn">立即下载</button>
        </div>
        <div class="app-card" tabindex="4" onclick="window.open('http://abc.apei583.top:5244/d/APP/tvapp/野草助手小米海信版_2.0.8.apk')">
            <div class="icon-container">
                <img src="http://abc.apei583.top:5244/d/APP/tvapp/icon/野草助手小米海信版_2.0.8.png" class="app-icon" alt="野草助手小米海信版_2.0.8">
            </div>
            <div class="app-name">野草助手小米海信版_2.0.8</div>
            <button class="download-btn">立即下载</button>
        </div>
        <div class="app-card" tabindex="5" onclick="window.open('http://abc.apei583.top:5244/d/APP/tvapp/丰彩TV_1.0.2.apk')">
            <div class="icon-container">
                <img src="http://abc.apei583.top:5244/d/APP/tvapp/icon/丰彩TV_1.0.2.png" class="app-icon" alt="丰彩TV_1.0.2">
            </div>
            <div class="app-name">丰彩TV_1.0.2</div>
            <button class="download-btn">立即下载</button>
        </div>
        <div class="app-card" tabindex="6" onclick="window.open('http://abc.apei583.top:5244/d/APP/tvapp/QuickFox_1.2.6.apk')">
            <div class="icon-container">
                <img src="http://abc.apei583.top:5244/d/APP/tvapp/icon/default.png" class="app-icon" alt="QuickFox_1.2.6">
            </div>
            <div class="app-name">QuickFox_1.2.6</div>
            <button class="download-btn">立即下载</button>
        </div>
        <div class="app-card" tabindex="7" onclick="window.open('http://abc.apei583.top:5244/d/APP/tvapp/独播库TV_6.2.apk')">
            <div class="icon-container">
                <img src="http://abc.apei583.top:5244/d/APP/tvapp/icon/独播库TV_6.2.png" class="app-icon" alt="独播库TV_6.2">
            </div>
            <div class="app-name">独播库TV_6.2</div>
            <button class="download-btn">立即下载</button>
        </div>
        <div class="app-card" tabindex="8" onclick="window.open('http://abc.apei583.top:5244/d/APP/tvapp/新喵影视_1.1.3.apk')">
            <div class="icon-container">
                <img src="http://abc.apei583.top:5244/d/APP/tvapp/icon/新喵影视_1.1.3.png" class="app-icon" alt="新喵影视_1.1.3">
            </div>
            <div class="app-name">新喵影视_1.1.3</div>
            <button class="download-btn">立即下载</button>
        </div>
        <div class="app-card" tabindex="9" onclick="window.open('http://abc.apei583.top:5244/d/APP/tvapp/小苹果影视盒子_1.6.1.apk')">
            <div class="icon-container">
                <img src="http://abc.apei583.top:5244/d/APP/tvapp/icon/小苹果影视盒子_1.6.1.png" class="app-icon" alt="小苹果影视盒子_1.6.1">
            </div>
            <div class="app-name">小苹果影视盒子_1.6.1</div>
            <button class="download-btn">立即下载</button>
        </div>
        <div class="app-card" tabindex="10" onclick="window.open('http://abc.apei583.top:5244/d/APP/tvapp/昭昭TV_1.0.3.apk')">
            <div class="icon-container">
                <img src="http://abc.apei583.top:5244/d/APP/tvapp/icon/昭昭TV_1.0.3.png" class="app-icon" alt="昭昭TV_1.0.3">
            </div>
            <div class="app-name">昭昭TV_1.0.3</div>
            <button class="download-btn">立即下载</button>
        </div>
        <div class="app-card" tabindex="11" onclick="window.open('http://abc.apei583.top:5244/d/APP/tvapp/SmartTube_30.48.apk')">
            <div class="icon-container">
                <img src="http://abc.apei583.top:5244/d/APP/tvapp/icon/SmartTube_30.48.png" class="app-icon" alt="SmartTube_30.48">
            </div>
            <div class="app-name">SmartTube_30.48</div>
            <button class="download-btn">立即下载</button>
        </div>
        <div class="app-card" tabindex="12" onclick="window.open('http://abc.apei583.top:5244/d/APP/tvapp/爱壹帆_2.3.4.apk')">
            <div class="icon-container">
                <img src="http://abc.apei583.top:5244/d/APP/tvapp/icon/爱壹帆_2.3.4.png" class="app-icon" alt="爱壹帆_2.3.4">
            </div>
            <div class="app-name">爱壹帆_2.3.4</div>
            <button class="download-btn">立即下载</button>
        </div>
    </div>

    <script>
        // 核心优化：精准自适应导航（修复720P下控制错乱）
        const focusable = document.querySelectorAll('.app-card, header');
        let currentIndex = 0;
        const totalItems = focusable.length;
        let columnCount = calculateColumnCount(); // 实时精准计算列数
        let cardElements = Array.from(document.querySelectorAll('.app-card')); // 单独存储应用卡片
        
        // 初始聚焦到头部
        focusable[currentIndex].focus();

        // 精准计算列数（解决720P下导航错乱的核心）
        function calculateColumnCount() {
            const grid = document.querySelector('.app-grid');
            const card = document.querySelector('.app-card');
            if (!grid || !card) return 4; // 默认4列（720P适配）
            
            const gridWidth = grid.clientWidth; // 网格实际可用宽度
            const cardWidth = card.offsetWidth; // 卡片实际宽度（包含内边距和边框）
            const gap = parseFloat(window.getComputedStyle(grid).gap); // 间距
            
            // 精确计算能容纳的列数：(网格宽度) / (卡片宽度 + 间距)，向下取整
            const count = Math.max(1, Math.floor(gridWidth / (cardWidth + gap)));
            console.log(`当前屏幕列数：${count}（网格宽：${gridWidth}，卡片宽：${cardWidth}）`);
            return count;
        }

        // 窗口大小变化时重新计算列数（实时适配）
        window.addEventListener('resize', () => {
            columnCount = calculateColumnCount();
        });

        // 修复上下左右导航逻辑（精准对应行列）
        document.onkeydown = function(e) {
            e = e || window.event;
            const key = e.key || e.keyCode;
            let newIndex = currentIndex;

            // 只处理应用卡片的导航（排除header）
            const isOnHeader = currentIndex === 0;
            const firstAppIndex = 1;
            const lastAppIndex = totalItems - 1;

            switch(key) {
                // 向右：顺序下一个（不循环）
                case 'ArrowRight': case 39:
                    if (isOnHeader) {
                        newIndex = firstAppIndex; // 头部→第一个应用
                    } else {
                        newIndex = Math.min(currentIndex + 1, lastAppIndex); // 不超过最后一个
                    }
                    break;

                // 向左：顺序上一个（不循环）
                case 'ArrowLeft': case 37:
                    if (currentIndex === firstAppIndex) {
                        newIndex = 0; // 第一个应用→头部
                    } else if (!isOnHeader) {
                        newIndex = currentIndex - 1; // 应用间向左
                    }
                    break;

                // 向下：同列下一行（精准计算）
                case 'ArrowDown': case 40:
                    if (isOnHeader) {
                        newIndex = firstAppIndex; // 头部→第一个应用
                    } else {
                        // 计算当前应用在卡片列表中的索引（排除header）
                        const cardIndex = currentIndex - 1;
                        // 下一行同列的卡片索引 = 当前卡片索引 + 列数
                        const nextCardIndex = cardIndex + columnCount;
                        // 检查是否超出卡片总数
                        if (nextCardIndex < cardElements。length) {
                            newIndex = nextCardIndex + 1; // 转换为focusable的索引（+1是因为header占0）
                        } else {
                            newIndex = currentIndex; // 超出则保持当前位置
                        }
                    }
                    break;

                // 向上：同列上一行（精准计算）
                case 'ArrowUp': case 38:
                    if (isOnHeader) {
                        newIndex = 0; // 头部向上无效
                    } else {
                        const cardIndex = currentIndex - 1;
                        const prevCardIndex = cardIndex - columnCount;
                        if (prevCardIndex >= 0) {
                            newIndex = prevCardIndex + 1; // 转换为focusable索引
                        } else {
                            newIndex = 0; // 第一行向上→头部
                        }
                    }
                    break;

                // 回车下载
                case 'Enter': case 13:
                    if (!isOnHeader) {
                        focusable[currentIndex]。click();
                        const appName = focusable[currentIndex].querySelector('.app-name').textContent;
                        console。log(`正在下载：${appName}`);
                    }
                    break;

                case 'Escape': case 27:
                    return;
                默认:
                    return;
            }

            // 更新焦点并滚动到可视区域
            if (newIndex !== currentIndex) {
                currentIndex = newIndex;
                focusable[currentIndex].focus();
                
                // 平滑滚动，确保焦点卡片在屏幕内
                focusable[currentIndex].scrollIntoView({
                    behavior: 'smooth',
                    block: 'nearest',
                    inline: 'nearest'
                });
            }

            // 阻止页面滚动
            e.preventDefault ? e.preventDefault() : (e.returnValue = false);
        };
    </script>
</body>
</html>
